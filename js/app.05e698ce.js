(function(t){function e(e){for(var a,n,o=e[0],l=e[1],c=e[2],u=0,p=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&p.push(r[n][0]),r[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,o=1;o<s.length;o++){var l=s[o];0!==r[l]&&(a=!1)}a&&(i.splice(e--,1),t=n(n.s=s[0]))}return t}var a={},r={app:0},i=[];function n(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=a,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(s,a,function(e){return t[e]}.bind(null,a));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/aavak-entry-app/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"002e":function(t,e,s){"use strict";s("927f")},2489:function(t,e,s){},"2c08":function(t,e,s){},"410f":function(t,e,s){"use strict";s("f125")},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),r=s("bc3a"),i=s.n(r),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",attrs:{id:"app"}},[s("app-header"),s("router-view",{key:t.$route.fullPath})],1)},o=[],l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container p-0 mb-5"},[s("nav",{staticClass:"navbar navbar-expand-md navbar-light  justify-content-between"},[s("router-link",{staticClass:"navbar-brand",attrs:{tag:"a",to:"/"}},[s("h1",[t._v("Entry")])]),t._m(0),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[s("div",{staticClass:"form-inline form-row my-2 my-md-0 ml-auto mr-md-0 mr-auto"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"col form-control mr-1 bg-light",attrs:{type:"date","aria-label":"Date"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}}),s("button",{staticClass:"col btn btn-outline-dark my-2 my-md-0 px-md-2 ml-1",on:{click:t.searched}},[t._v(" Search ")])])])],1)])},c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"navbar-toggler",attrs:{id:"togglerButton",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[s("span",{staticClass:"navbar-toggler-icon font-weight-bold"})])}],d={data(){return{date:this.today()}},methods:{today(){let t=new Date;return t.getFullYear().toString()+"-"+(t.getMonth()+1).toString().padStart(2,0)+"-"+t.getDate().toString().padStart(2,0)},searched(){this.$router.currentRoute.path!="/records/"+this.date+"/"&&(document.getElementById("togglerButton").click(),this.$router.push("/records/"+this.date+"/"))}}},u=d,p=(s("d62d"),s("2877")),h=Object(p["a"])(u,l,c,!1,null,"75dabdb5",null),m=h.exports,g={name:"App",components:{appHeader:m},created(){this.$store.dispatch("getNames")}},v=g,f=Object(p["a"])(v,n,o,!1,null,null,null),y=f.exports,b=s("8c4f"),w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"form"},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-8 mb-3"},[s("label",{attrs:{for:"name"}},[t._v("Name : ")]),s("auto-complete",{attrs:{inputId:"name",items:t.names},on:{input:function(e){t.name=e}}})],1),s("div",{staticClass:"form-group col-md-4 mb-3"},[s("label",{attrs:{for:"type"}},[t._v("Paddy Type : ")]),s("auto-complete",{attrs:{inputId:"type",items:t.types},on:{input:function(e){t.type=e}}})],1)]),s("div",{staticClass:"form-row"},[s("div",{staticClass:"col-md-3 mb-3 form-group"},[s("label",{attrs:{for:"bags"}},[t._v("Bags : ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.bags,expression:"bags"}],staticClass:"form-control text-right",attrs:{type:"number",id:"bags"},domProps:{value:t.bags},on:{focus:function(t){return t.target.select()},input:function(e){e.target.composing||(t.bags=e.target.value)}}})]),s("div",{staticClass:"col-md-3 mb-3 form-group"},[s("label",{attrs:{for:"weight"}},[t._v("Weight : ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.weight,expression:"weight"}],staticClass:"form-control text-right",attrs:{type:"number",step:"0.01",id:"weight"},domProps:{value:t.weight},on:{focus:function(t){return t.target.select()},input:function(e){e.target.composing||(t.weight=e.target.value)}}})]),s("div",{staticClass:"col-md-3 mb-3 form-group"},[s("label",{attrs:{for:"rate"}},[t._v("Rate : ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.rate,expression:"rate"}],staticClass:"form-control text-right",attrs:{type:"number",step:"0.01",id:"rate"},domProps:{value:t.rate},on:{focus:function(t){return t.target.select()},input:function(e){e.target.composing||(t.rate=e.target.value)}}})]),s("div",{staticClass:"col-md-3 mb-3 form-group"},[s("label",{attrs:{for:"rate"}},[t._v("Total : ")]),s("input",{staticClass:"form-control text-right",attrs:{type:"number",id:"rate",disabled:""},domProps:{value:t.total}})])]),s("div",{staticClass:"form-row justify-content-md-between"},[s("div",{staticClass:"col-md-3 mb-3 form-group"},[s("label",{attrs:{for:"date"}},[t._v("Date: ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"form-control",attrs:{type:"date",id:"date"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}})]),s("div",{staticClass:"col-md-auto mb-3 form-group d-flex justify-content-center align-items-end"},[s("button",{staticClass:"btn btn-light border px-3",attrs:{disabled:t.isAdding},on:{click:t.saveEntry}},[t._v(" "+t._s(t.isAdding?"Adding":"Add")+" ")])])])])])])])},C=[],_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"autocomplete"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",autocomplete:"off",id:t.inputId},domProps:{value:t.search},on:{input:[function(e){e.target.composing||(t.search=e.target.value)},t.onChange],keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.onArrowDown(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.onArrowUp(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onEnter(e)}],focus:function(t){return t.target.select()}}}),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],staticClass:"autocomplete-results",attrs:{id:"autocomplete-results"}},[t.isLoading?s("li",{staticClass:"loading"},[t._v("Loading results...")]):t._l(t.results,(function(e,a){return s("li",{key:a,staticClass:"autocomplete-result pl-1 pr-3",class:{"is-active":a===t.arrowCounter},on:{click:function(s){return t.setResult(e)}}},[t._v(t._s(e))])}))],2)])},x=[],S={name:"autocomplete",props:{items:{type:Array,required:!1,default:()=>[]},isAsync:{type:Boolean,required:!1,default:!1},inputId:{type:String,required:!1,default:""},showFirst:{type:Boolean,required:!1,default:!1},value:{type:String,required:!1,default:""}},data(){return{search:"",isOpen:!1,results:[],isLoading:!1,arrowCounter:0}},methods:{onChange(){this.$emit("input",this.search),this.isAsync?this.isLoading=!0:(this.filterResults(),this.isOpen=!0)},filterResults(){this.results=this.items.filter(t=>t.toLowerCase().indexOf(this.search.toLowerCase())>=0).map(t=>this.titleCase(t))},setResult(t){this.search=t,this.isOpen=!1,this.$emit("input",t)},onArrowDown(t){++this.arrowCounter>=this.results.length&&(this.arrowCounter=0)},onArrowUp(){--this.arrowCounter<0&&(this.arrowCounter=this.results.length-1)},onEnter(){this.setResult(this.results[this.arrowCounter]),this.arrowCounter=-1},handleClickOutside(t){this.$el.contains(t.target)||(this.isOpen=!1)}},watch:{items:function(t,e){t.length!==e.length&&(this.results=t,this.isLoading=!1)}},created(){this.showFirst&&this.items.length>0?this.search=this.items[0]:this.search=this.titleCase(this.value),document.addEventListener("click",this.handleClickOutside)},destroyed(){document.removeEventListener("click",this.handleClickOutside)}},E=S,k=(s("002e"),Object(p["a"])(E,_,x,!1,null,null,null)),j=k.exports,O={components:{AutoComplete:j},data(){return{types:this.$store.state.paddyTypes,name:"",type:"",bags:0,weight:0,rate:0,gotBill:!1,date:"",isAdding:!1}},created(){let t=new Date;this.date=t.getFullYear().toString()+"-"+(t.getMonth()+1).toString().padStart(2,0)+"-"+t.getDate().toString().padStart(2,0)},computed:{total(){return(this.weight*this.rate).toFixed(2)},names(){return Object.keys(this.$store.state.names)}},methods:{validEntry(){return""!=this.name.trim()&&(""!=this.type.trim()&&(0!=this.bags&&0!=this.total))},saveEntry(){this.validEntry()&&(this.isAdding=!0,this.name=this.name.toLowerCase(),this.$store.dispatch("increaseNameCount",this.name),i.a.post("entries/"+this.date+"/"+this.name+".json/?print=silent",{type:this.type,bags:parseInt(this.bags),weight:parseFloat(this.weight),rate:parseFloat(this.rate),gotBill:this.gotBill}).then(t=>{this.bags=this.weight=this.rate=0,this.gotBill=!1,this.isAdding=!1}).catch(t=>console.error(t)))}}},$=O,N=(s("410f"),Object(p["a"])($,w,C,!1,null,"392b0421",null)),P=N.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("h4",[t._v("Entries from "+t._s(t.showDate)+" :")]),s("hr"),t.isLoading?s("div",{staticClass:"h5 text-center mt-3"},[t._m(0)]):t.isEmptyObject(t.records)?s("div",{staticClass:"h5 text-center"},[s("div",{staticClass:"alert alert-warning",attrs:{role:"alert"}},[t._v(" No Entries found on this date! ")])]):s("div",{staticClass:"table-responsive"},[s("table",{key:t.tableChanged,staticClass:"table mb-5"},[s("thead",{staticClass:"thead-dark"},[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("#")]),s("th",{attrs:{scope:"col"}},[t._v("Name")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Paddy")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Bags")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Weight")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Rate")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Price")]),t.isAdmin?s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Actions")]):t._e()])]),t._l(t.names,(function(e,a){return s("tbody",{key:a},[t._l(t.records[e],(function(a,r){return s("tr",{key:r,staticClass:"text-muted"},[s("th",{attrs:{scope:"row"}}),s("td",{attrs:{width:"20%"}}),s("td",{staticClass:"text-center"},[t._v(t._s(a.type))]),s("td",{staticClass:"text-center"},[t._v(t._s(a.bags))]),s("td",{staticClass:"text-center"},[t._v(t._s(a.weight))]),s("td",{staticClass:"text-center"},[t._v(t._s(a.rate))]),s("td",{staticClass:"text-center"},[t._v(t._s((a.weight*a.rate).toFixed(2)))]),t._v(" "),s("td",{staticClass:"text-center"},[s("span",{staticClass:"btn py-0",on:{click:function(s){return t.editEntry(e,r)}}},[s("i",{staticClass:"fa fa-pencil-square-o",attrs:{"aria-hidden":"true"}})]),s("span",{staticClass:"btn py-0",on:{click:function(s){return t.deleteEntry(e,r)}}},[s("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),s("tr",{staticClass:"bg-light",staticStyle:{"border-bottom":"2px solid grey","font-weight":"450"}},[s("th",{attrs:{scope:"row"}}),s("td",{staticStyle:{"white-space":"nowrap"}},[t._v(t._s(t.titleCase(e)))]),s("td",{staticClass:"text-center"}),s("td",{staticClass:"text-center"},[t._v(t._s(t.nameStats[e].bags))]),s("td",{staticClass:"text-center"},[t._v(t._s(t.nameStats[e].weight))]),s("td",{staticClass:"text-center"}),s("td",{staticClass:"text-center"},[t._v(t._s(t.nameStats[e].price.toFixed(2)))]),s("td",{staticClass:"text-center"},[t._v(t._s((1.005*t.nameStats[e].price).toFixed(2)))])])],2)})),s("tbody",[s("tr",{staticStyle:{"border-bottom":"2px solid grey","font-size":"103%"}},[s("th",{attrs:{scope:"row"}}),s("td"),s("td",{staticClass:"text-center"}),s("td",{staticClass:"text-center"},[t._v(t._s(t.dayStats.bags))]),s("td",{staticClass:"text-center"},[t._v(t._s(t.dayStats.weight))]),s("td",{staticClass:"text-center"}),s("td",{staticClass:"text-center"},[t._v(t._s(t.dayStats.price.toFixed(2)))]),s("td",{staticClass:"text-center"},[t._v(t._s((1.005*t.dayStats.price).toFixed(2)))])])])],2),s("report",{key:t.statsChanged,attrs:{stats:t.typeStats}})],1)])},D=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex justify-content-center"},[s("div",{staticClass:"spinner-border",attrs:{role:"status"}},[s("span",{staticClass:"sr-only"},[t._v("Loading...")])])])}],L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper mt-2 mb-5"},[s("legend",[t._v("Today's Summary:")]),s("table",{staticClass:"table w-auto"},[s("thead",{},[s("tr",[s("th"),t._l(t.types,(function(e){return s("th",{key:e,staticClass:"text-center",attrs:{scope:"col"}},[t._v(t._s(e))])}))],2)]),s("tbody",[s("tr",[s("th",{attrs:{scope:"row"}},[t._v("Bags")]),t._l(t.types,(function(e){return s("td",{key:e,staticClass:"text-right"},[t._v(t._s(t.stats[e].bags))])}))],2),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("Weight")]),t._l(t.types,(function(e){return s("td",{key:e,staticClass:"text-right"},[t._v(t._s(t.stats[e].weight))])}))],2),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("Avg. Rate")]),t._l(t.types,(function(e){return s("td",{key:e,staticClass:"text-right"},[t._v(t._s(parseFloat((t.stats[e].price/t.stats[e].weight).toFixed(3))))])}))],2),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("Price")]),t._l(t.types,(function(e){return s("td",{key:e,staticClass:"text-right"},[t._v(t._s(t.stats[e].price))])}))],2)])])])},B=[],F={props:["stats"],data(){return{types:null}},created(){this.types=Object.keys(this.stats)}},R=F,U=(s("ae8d"),Object(p["a"])(R,L,B,!1,null,"6d57fe86",null)),T=U.exports,I={components:{Report:T},data(){return{date:this.$route.params.date,records:{},isAdmin:!0,isLoading:!0,names:[],cnti:0,tableChanged:Math.random(),statsChanged:Math.random(),showDate:"",nameStats:{},typeStats:{},dayStats:{}}},created(){this.showDate=new Date(this.date).toLocaleDateString([],{weekday:"long",year:"numeric",month:"long",day:"numeric"}),this.dayStats={bags:0,weight:0,price:0},i.a.get("entries/"+this.date+".json/").then(t=>{null!=t.data&&(this.records=t.data,this.cnti=0,this.names=Object.keys(this.records),this.names.sort(),this.names.forEach(t=>{this.nameStats[t]={bags:0,weight:0,price:0},Object.values(this.records[t]).forEach(e=>{this.dayStats.bags+=e.bags,this.dayStats.weight+=e.weight,this.dayStats.price+=e.weight*e.rate,this.nameStats[t].bags+=e.bags,this.nameStats[t].weight+=e.weight,this.nameStats[t].price+=e.weight*e.rate,void 0==this.typeStats[e.type]&&(this.typeStats[e.type]={bags:0,weight:0,price:0}),this.typeStats[e.type].bags+=e.bags,this.typeStats[e.type].weight+=e.weight,this.typeStats[e.type].price+=e.weight*e.rate})})),this.isLoading=!1}).catch(t=>console.error(t))},methods:{removeEntryStats(t,e){let s=this.records[t][e];this.dayStats.bags-=s.bags,this.dayStats.weight-=s.weight,this.dayStats.price-=s.weight*s.rate,this.nameStats[t].bags-=s.bags,this.nameStats[t].weight-=s.weight,this.nameStats[t].price-=s.weight*s.rate,0==this.nameStats[t].weight&&0==this.nameStats[t].price&&this.names.splice(this.names.indexOf(t),1),this.typeStats[s.type].bags-=s.bags,this.typeStats[s.type].weight-=s.weight,this.typeStats[s.type].price-=s.weight*s.rate,0==this.typeStats[s.type].weight&&0==this.typeStats[s.type].price&&delete this.typeStats[s.type],delete this.records[t][e],this.isEmptyObject(this.records[t])&&delete this.records[t],++this.tableChanged,++this.statsChanged},editEntry(t,e){let s=this.records[t][e];s.date=this.date,s.name=t,s.id=e,this.$store.commit("setEditEntry",s),this.$router.push("/edit")},deleteEntry(t,e){let s="Delete "+this.titleCase(t)+"'s entry of "+this.records[t][e].weight+"(kgs) x Rs "+this.records[t][e].rate+" = Rs "+(this.records[t][e].weight*this.records[t][e].rate).toFixed(2);confirm(s)&&i.a.delete("entries/"+this.date+"/"+t+"/"+e+".json/?print=silent").then(s=>{this.removeEntryStats(t,e),this.$store.dispatch("decreaseNameCount",t)}).catch(t=>console.error(t))}}},M=I,q=(s("f222"),Object(p["a"])(M,A,D,!1,null,"76e3577b",null)),W=q.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"wrapper"},[t.noEditEntry?s("h3",{staticClass:"text-center"},[t._v("You need to select an entry from the records.")]):s("div",{staticClass:"form"},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-8 mb-3"},[s("label",{attrs:{for:"name"}},[t._v("Name : ")]),s("auto-complete",{attrs:{inputId:"name",items:t.names,value:t.name},on:{input:function(e){t.name=e}}})],1),s("div",{staticClass:"form-group col-md-4 mb-3"},[s("label",{attrs:{for:"type"}},[t._v("Paddy Type : ")]),s("auto-complete",{attrs:{inputId:"type",items:t.types,value:t.type},on:{input:function(e){t.type=e}}})],1)]),s("div",{staticClass:"form-row"},[s("div",{staticClass:"col-md-3 mb-3 form-group"},[s("label",{attrs:{for:"bags"}},[t._v("Bags : ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.bags,expression:"bags"}],staticClass:"form-control text-right",attrs:{type:"number",id:"bags"},domProps:{value:t.bags},on:{input:function(e){e.target.composing||(t.bags=e.target.value)}}})]),s("div",{staticClass:"col-md-3 mb-3 form-group"},[s("label",{attrs:{for:"weight"}},[t._v("Weight : ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.weight,expression:"weight"}],staticClass:"form-control text-right",attrs:{type:"number",step:"0.01",id:"weight"},domProps:{value:t.weight},on:{input:function(e){e.target.composing||(t.weight=e.target.value)}}})]),s("div",{staticClass:"col-md-3 mb-3 form-group"},[s("label",{attrs:{for:"rate"}},[t._v("Rate : ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.rate,expression:"rate"}],staticClass:"form-control text-right",attrs:{type:"number",step:"0.01",id:"rate"},domProps:{value:t.rate},on:{input:function(e){e.target.composing||(t.rate=e.target.value)}}})]),s("div",{staticClass:"col-md-3 mb-3 form-group"},[s("label",{attrs:{for:"rate"}},[t._v("Total : ")]),s("input",{staticClass:"form-control text-right",attrs:{type:"number",id:"rate",disabled:""},domProps:{value:t.total}})])]),s("div",{staticClass:"form-row justify-content-md-between"},[s("div",{staticClass:"col-md-3 mb-3 form-group"},[s("label",{attrs:{for:"date"}},[t._v("Date: ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"form-control",attrs:{type:"date",id:"date"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}})]),s("div",{staticClass:"col-md-auto mb-3 form-group d-flex justify-content-center align-items-end"},[s("button",{staticClass:"btn btn-light border px-3",attrs:{disabled:t.isUpdating},on:{click:t.updateEntry}},[t._v(" "+t._s(t.isUpdating?"Updating":"Update")+" ")])])])])])])])},Y=[],G={components:{AutoComplete:j},data(){return{noEditEntry:!1,id:null,date:null,name:null,names:Object.keys(this.$store.state.names),types:this.$store.state.paddyTypes,prevName:"",prevDate:"",type:"",bags:0,weight:0,rate:0,gotBill:!1,isUpdating:!1}},created(){let t=this.$store.state.editEntry;null!=t?(this.id=t["id"],this.name=t["name"],this.date=t["date"],this.type=t["type"],this.bags=t["bags"],this.weight=t["weight"],this.rate=t["rate"],this.gotBill=t["gotBill"],this.prevName=this.name,this.prevDate=this.date):this.noEditEntry=!0},computed:{total(){return(this.weight*this.rate).toFixed(2)}},methods:{validEntry(){return""!=this.name.trim()&&(""!=this.type.trim()&&(0!=this.bags&&0!=this.total))},updateEntry(){if(!this.validEntry())return;this.isUpdating=!0;let t=this.name.toLowerCase();t!=this.prevName&&this.$store.dispatch("increaseNameCount",t);let e={type:this.type,bags:parseInt(this.bags),weight:parseFloat(this.weight),rate:parseFloat(this.rate)};i.a.delete("entries/"+this.prevDate+"/"+this.prevName+"/"+this.id+".json/?print=silent").then(()=>{i.a.put("entries/"+this.date+"/"+t+"/"+this.id+".json/?print=silent",e).then(()=>{t!=this.prevName&&this.$store.dispatch("decreaseNameCount",this.prevName),this.isUpdating=!1,this.$router.push("/records/"+this.date+"/")}).catch(t=>console.error(t))}).catch(t=>console.error(t))}},beforeRouteLeave(t,e,s){this.$store.commit("unsetEditEntry"),s()}},H=G,z=(s("cf91"),Object(p["a"])(H,J,Y,!1,null,"6376ad96",null)),K=z.exports;a["a"].use(b["a"]);const Q=[{path:"/",name:"Home",component:P},{path:"/records/:date",name:"Records",component:W},{path:"/edit",name:"Edit",component:K},{path:"/*",redirect:"/"}],V=new b["a"]({mode:"history",base:"/aavak-entry-app/",routes:Q});var X=V,Z=s("2f62"),tt=s("0e44");a["a"].use(Z["a"]);var et=new Z["a"].Store({plugins:[Object(tt["a"])({storage:window.sessionStorage})],state:{paddyTypes:["Basmati","Black Paddy","Dabra","Guj-17","Gujari","Jira","Kolam","Mamra","Parimal"],names:[],editEntry:null},mutations:{setEditEntry(t,e){t.editEntry=e},unsetEditEntry(t){t.editEntry=null}},actions:{async getNames({state:t}){await i.a.get("names.json/").then(e=>{null!=e.data&&(t.names=e.data)}).catch(t=>console.error(t))},async increaseNameCount({state:t},e){void 0==t.names[e]&&(t.names[e]=0),await i.a.put("names/"+e+".json/?print=silent",++t.names[e]).then(()=>{}).catch(t=>console.error(t))},async decreaseNameCount({state:t},e){void 0!=t.names[e]&&(t.names[e]<=0||(1==t.names[e]?await i.a.delete("names/"+e+".json/?print=silent").then(()=>{delete t.names[e]}).catch(t=>console.error(t)):await i.a.put("names/"+e+".json/?print=silent",--t.names[e]).then(()=>{}).catch(t=>console.error(t))))}},modules:{}});i.a.defaults.baseURL="https://aavak-app.firebaseio.com/",a["a"].config.productionTip=!1,a["a"].mixin({methods:{isEmptyObject(t){for(let e in t)return!1;return!0},titleCase(t){let e=t.toLowerCase().split(" ");for(let s=0;s<e.length;s++)e[s]=e[s].charAt(0).toUpperCase()+e[s].substring(1);return e.join(" ")}}}),new a["a"]({router:X,store:et,render:function(t){return t(y)}}).$mount("#app")},"81fd":function(t,e,s){},"927f":function(t,e,s){},ae8d:function(t,e,s){"use strict";s("2c08")},cf91:function(t,e,s){"use strict";s("ee91")},d62d:function(t,e,s){"use strict";s("2489")},ee91:function(t,e,s){},f125:function(t,e,s){},f222:function(t,e,s){"use strict";s("81fd")}});
//# sourceMappingURL=app.05e698ce.js.map